<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í™'s ê²Œì‹œíŒ</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="/assets/icon.png"/>
    <link rel="apple-touch-icon" href="/assets/icon.png"/> 
</head>
<body>
    <%- include('nav.ejs') %>
        <% for (var i = 0; i < ê¸€ëª©ë¡.length; i++){ %>
          
            <div class="white-bg">
                <div class="list-box">
                  <a href="/detail/<%= ê¸€ëª©ë¡[i]._id %>">
                    <h4><%= ê¸€ëª©ë¡[i].title %></h4>
                  </a>
                  <p><%= ê¸€ëª©ë¡[i].content %></p>
                  <a href="/edit/<%= ê¸€ëª©ë¡[i]._id %>">âœï¸</a>
                  <span class="delete" data-id="<%= ê¸€ëª©ë¡[i]._id %>">ğŸ—‘ï¸</span>
                </div>
            </div>
          
          <% } %> 
    <script>
      for (let i = 0; i < '<%= ê¸€ëª©ë¡.length %>'; i++) {
          document.querySelectorAll('.delete')[i].addEventListener('click', function(e){
          fetch('/delete?docid=' + e.target.dataset.id, {
            method : 'DELETE',
          })
          .then((r)=>r.text())
          .then((r)=>{
            e.target.parentElement.parentElement.style.transform = 'scale(0)'
            setTimeout(function() {
              e.target.parentElement.parentElement.style.display = 'none'
            }, 300)
          })
        }) 
      }
    </script>
</body>
</html>